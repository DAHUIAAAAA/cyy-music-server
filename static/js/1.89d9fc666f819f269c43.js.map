{"version":3,"sources":["webpack:///src/base/listview/listview.vue","webpack:///./src/base/listview/listview.vue?113e","webpack:///./src/base/listview/listview.vue","webpack:///src/components/singer/singer.vue","webpack:///./src/components/singer/singer.vue?9f58","webpack:///./src/components/singer/singer.vue","webpack:///./src/api/singer.js"],"names":["listview","data","currentIndex","scrollY","props","type","Array","default","components","Scroll","scroll_scroll","Loading","loading","created","this","listenScroll","probeType","touch","listHeight","methods","scroll","pos","y","onShortCutTouchStart","e","anchorIndex","parseInt","Object","dom","target","firstTouch","touches","y1","pageY","_scrollTo","onShortCutTouchMove","y2","delta","index","shortcutList","length","$refs","scrollToElement","listGroup","_calculateHeight","list","height","push","i","clientHeight","selectItem","item","$emit","computed","map","group","title","substr","fixedTitle","watch","_this","setTimeout","newY","minHeight","listview_listview","render","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","on","_l","key","refInFor","_v","_s","click","$event","directives","name","rawName","value","expression","touchstart","touchmove","stopPropagation","preventDefault","class","current","data-index","staticRenderFns","base_listview_listview","__webpack_require__","normalizeComponent","ssrContext","singer_singer","mixins","singers","ListView","_getSingerList","extends_default","selectSinger","singer","$router","path","id","setSinger","then","res","code","config","_normalizeSinger","hot","items","forEach","js_singer","Fsinger_name","Fsinger_mid","Findex","ret","val","match","sort","a","b","charCodeAt","concat","vuex_esm","components_singer_singer","select","singer_Component","singer_normalizeComponent","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","commonParams","channel","page","pagesize","pagenum","hostUin","needNewCode","platform","jsonp","options","singerId","order","begin","num","songstatus","singermid"],"mappings":"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","file":"static/js/1.89d9fc666f819f269c43.js","sourcesContent":["<template>\r\n    <scroll\r\n        ref=\"listview\"\r\n        class=\"listview\"\r\n        :data=\"data\"\r\n        :listenScroll=\"listenScroll\"\r\n        @scroll=\"scroll\"\r\n        :probeType=\"probeType\"\r\n    >\r\n        <!-- 歌手列表 -->\r\n        <ul>\r\n            <li v-for=\"(group,index) in data\" :key=\"index\" class=\"list-group\" ref=\"listGroup\">\r\n                <h2 class=\"list-group-title\">{{group.title}}</h2>\r\n                <ul>\r\n                    <li\r\n                        @click=\"selectItem(item)\"\r\n                        v-for=\"(item,index) in group.items\"\r\n                        :key=\"index\"\r\n                        class=\"list-group-item\"\r\n                    >\r\n                        <img class=\"avatar\" v-lazy=\"item.avatar\" />\r\n                        <span class=\"name\">{{item.name}}</span>\r\n                    </li>\r\n                </ul>\r\n            </li>\r\n        </ul>\r\n        <!-- 快速查找 -->\r\n        <div\r\n            class=\"list-shortcut\"\r\n            @touchstart=\"onShortCutTouchStart\"\r\n            @touchmove.stop.prevent=\"onShortCutTouchMove\"\r\n        >\r\n            <ul>\r\n                <li\r\n                    class=\"item\"\r\n                    v-for=\"(item, index) in shortcutList\"\r\n                    :key=\"index\"\r\n                    :data-index=\"index\"\r\n                    :class=\"{current: currentIndex === index}\"\r\n                >{{item}}</li>\r\n            </ul>\r\n        </div>\r\n        <!-- 固定标题 -->\r\n        <div class=\"list-fixed\" ref=\"fixed\" v-show=\"fixedTitle\">\r\n            <div class=\"fixed-title\">{{fixedTitle}}</div>\r\n        </div>\r\n        <!-- 加载条 -->\r\n        <loading v-show=\"!data.length\" class=\"loading-container\" />\r\n    </scroll>\r\n</template>\r\n\r\n<script>\r\nimport Scroll from \"base/scroll/scroll\";\r\nimport Loading from \"base/loading/loading\";\r\nimport { getData } from \"common/js/dom\";\r\n\r\nconst ANCHOR_HEIGHT = 18;\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            currentIndex: 0,\r\n            scrollY: -1\r\n        };\r\n    },\r\n    props: {\r\n        data: {\r\n            type: Array,\r\n            default: () => []\r\n        }\r\n    },\r\n    components: {\r\n        Scroll,\r\n        Loading\r\n    },\r\n    created() {\r\n        this.listenScroll = true;\r\n        this.probeType = 3;\r\n        this.touch = {};\r\n        this.listHeight = [];\r\n    },\r\n    methods: {\r\n        scroll(pos) {\r\n            this.scrollY = pos.y;\r\n        },\r\n        onShortCutTouchStart(e) {\r\n            let anchorIndex = parseInt(getData(e.target, \"index\")),\r\n                firstTouch = e.touches[0];\r\n\r\n            // 获取第一次按下的位置，以计算滑动到哪个区间\r\n            this.touch.y1 = firstTouch.pageY;\r\n            this.touch.anchorIndex = anchorIndex;\r\n\r\n            this._scrollTo(anchorIndex);\r\n        },\r\n        onShortCutTouchMove(e) {\r\n            let touch = e.touches[0];\r\n\r\n            this.touch.y2 = touch.pageY;\r\n\r\n            // 判断手指滑动在哪个索引\r\n            let delta = ((this.touch.y2 - this.touch.y1) / ANCHOR_HEIGHT) | 0,\r\n                anchorIndex = this.touch.anchorIndex + delta;\r\n\r\n            this._scrollTo(anchorIndex);\r\n        },\r\n        _scrollTo(index) {\r\n            if (!index && index !== 0) return;\r\n            if (index < 0) {\r\n                index = 0;\r\n            } else if (index > this.shortcutList.length - 1) {\r\n                index = this.shortcutList.length - 1;\r\n            }\r\n\r\n            this.$refs.listview.scrollToElement(this.$refs.listGroup[index], 0);\r\n            this.currentIndex = index;\r\n        },\r\n        // 计算每个分类的高度\r\n        _calculateHeight() {\r\n            const list = this.$refs.listGroup;\r\n            let height = 0;\r\n            this.listHeight.push(height);\r\n            for (let i = 0; i < list.length; i++) {\r\n                let item = list[i];\r\n                height += item.clientHeight;\r\n                this.listHeight.push(height);\r\n            }\r\n        },\r\n        selectItem(item) {\r\n            this.$emit('select', item);\r\n        }\r\n    },\r\n    computed: {\r\n        shortcutList() {\r\n            return this.data.map(group => group.title.substr(0, 1));\r\n        },\r\n        fixedTitle() {\r\n            if (this.scrollY > 0) return \"\";\r\n            return this.data[this.currentIndex]\r\n                ? this.data[this.currentIndex].title\r\n                : \"\";\r\n        }\r\n    },\r\n    watch: {\r\n        data() {\r\n            setTimeout(() => {\r\n                this._calculateHeight();\r\n            }, 20);\r\n        },\r\n        scrollY(newY) {\r\n            const listHeight = this.listHeight;\r\n            // 当在顶部以上滚动时\r\n            if (newY > 0) {\r\n                this.currentIndex = 0;\r\n                return;\r\n            }\r\n\r\n            // 当在中间部分滚动时\r\n            for (let i = 0; i < listHeight.length - 1; i++) {\r\n                let minHeight = listHeight[i],\r\n                    maxHeight = listHeight[i + 1];\r\n\r\n                if (-newY < maxHeight && -newY >= minHeight) {\r\n                    this.currentIndex = i;\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // 当在底部滚动时\r\n            this.currentIndex = this.listHeight - 2;\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n@import '~common/stylus/variable';\r\n\r\n.listview {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: hidden;\r\n    background: $color-background;\r\n\r\n    .list-group {\r\n        padding-bottom: 30px;\r\n\r\n        .list-group-title {\r\n            height: 30px;\r\n            line-height: 30px;\r\n            padding-left: 20px;\r\n            font-size: $font-size-small;\r\n            color: $color-text-l;\r\n            background: $color-highlight-background;\r\n        }\r\n\r\n        .list-group-item {\r\n            display: flex;\r\n            align-items: center;\r\n            padding: 20px 0 0 30px;\r\n\r\n            .avatar {\r\n                width: 50px;\r\n                height: 50px;\r\n                border-radius: 50%;\r\n            }\r\n\r\n            .name {\r\n                margin-left: 20px;\r\n                color: $color-text-l;\r\n                font-size: $font-size-medium;\r\n            }\r\n        }\r\n    }\r\n\r\n    .list-shortcut {\r\n        position: absolute;\r\n        z-index: 30;\r\n        right: 0;\r\n        top: 50%;\r\n        transform: translateY(-50%);\r\n        width: 20px;\r\n        padding: 20px 0;\r\n        border-radius: 10px;\r\n        text-align: center;\r\n        background: $color-background-d;\r\n        font-family: Helvetica;\r\n\r\n        .item {\r\n            padding: 3px;\r\n            line-height: 1;\r\n            color: $color-text-l;\r\n            font-size: $font-size-small;\r\n\r\n            &.current {\r\n                color: $color-theme;\r\n            }\r\n        }\r\n    }\r\n\r\n    .list-fixed {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n\r\n        .fixed-title {\r\n            height: 30px;\r\n            line-height: 30px;\r\n            padding-left: 20px;\r\n            font-size: $font-size-small;\r\n            color: $color-text-l;\r\n            background: $color-highlight-background;\r\n        }\r\n    }\r\n\r\n    .loading-container {\r\n        position: absolute;\r\n        width: 100%;\r\n        top: 50%;\r\n        transform: translateY(-50%);\r\n    }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/base/listview/listview.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('scroll',{ref:\"listview\",staticClass:\"listview\",attrs:{\"data\":_vm.data,\"listenScroll\":_vm.listenScroll,\"probeType\":_vm.probeType},on:{\"scroll\":_vm.scroll}},[_c('ul',_vm._l((_vm.data),function(group,index){return _c('li',{key:index,ref:\"listGroup\",refInFor:true,staticClass:\"list-group\"},[_c('h2',{staticClass:\"list-group-title\"},[_vm._v(_vm._s(group.title))]),_vm._v(\" \"),_c('ul',_vm._l((group.items),function(item,index){return _c('li',{key:index,staticClass:\"list-group-item\",on:{\"click\":function($event){return _vm.selectItem(item)}}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.avatar),expression:\"item.avatar\"}],staticClass:\"avatar\"}),_vm._v(\" \"),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))])])}),0)])}),0),_vm._v(\" \"),_c('div',{staticClass:\"list-shortcut\",on:{\"touchstart\":_vm.onShortCutTouchStart,\"touchmove\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.onShortCutTouchMove($event)}}},[_c('ul',_vm._l((_vm.shortcutList),function(item,index){return _c('li',{key:index,staticClass:\"item\",class:{current: _vm.currentIndex === index},attrs:{\"data-index\":index}},[_vm._v(_vm._s(item))])}),0)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.fixedTitle),expression:\"fixedTitle\"}],ref:\"fixed\",staticClass:\"list-fixed\"},[_c('div',{staticClass:\"fixed-title\"},[_vm._v(_vm._s(_vm.fixedTitle))])]),_vm._v(\" \"),_c('loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.data.length),expression:\"!data.length\"}],staticClass:\"loading-container\"})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1c1c1b10\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/listview/listview.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1c1c1b10\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./listview.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./listview.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./listview.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1c1c1b10\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./listview.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1c1c1b10\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/listview/listview.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div class=\"singer\">\r\n        <list-view @select=\"selectSinger\" :data=\"singers\" ref=\"list\" />\r\n        <transition name=\"slide\">\r\n            <router-view></router-view>\r\n        </transition>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSingerList } from \"api/singer\";\r\nimport { ERR_OK } from \"api/config\";\r\nimport ListView from \"base/listview/listview\";\r\nimport Singer from \"common/js/singer\";\r\nimport { mapMutations } from \"vuex\";\r\nimport { playlistMixin } from \"common/js/mixin\";\r\n\r\nconst HOT_SINGER_LEN = 10;\r\nconst HOT_NAME = \"热门\";\r\n\r\nexport default {\r\n    mixins: [playlistMixin],\r\n    data() {\r\n        return {\r\n            singers: []\r\n        };\r\n    },\r\n    components: {\r\n        ListView\r\n    },\r\n    created() {\r\n        this._getSingerList();\r\n    },\r\n    methods: {\r\n        selectSinger(singer) {\r\n            this.$router.push({\r\n                path: `/singer/${singer.id}`\r\n            });\r\n            this.setSinger(singer);\r\n        },\r\n        _getSingerList() {\r\n            getSingerList().then(res => {\r\n                if (res.code === ERR_OK) {\r\n                    this.singers = this._normalizeSinger(res.data.list);\r\n                }\r\n            });\r\n        },\r\n        _normalizeSinger(list) {\r\n            let map = {\r\n                hot: {\r\n                    title: HOT_NAME,\r\n                    items: []\r\n                }\r\n            };\r\n\r\n            list.forEach((item, index) => {\r\n                if (index < HOT_SINGER_LEN) {\r\n                    map.hot.items.push(\r\n                        new Singer({\r\n                            name: item.Fsinger_name,\r\n                            id: item.Fsinger_mid\r\n                        })\r\n                    );\r\n                }\r\n\r\n                const key = item.Findex;\r\n\r\n                if (!map[key]) {\r\n                    map[key] = {\r\n                        title: key,\r\n                        items: []\r\n                    };\r\n                }\r\n\r\n                map[key].items.push(\r\n                    new Singer({\r\n                        name: item.Fsinger_name,\r\n                        id: item.Fsinger_mid\r\n                    })\r\n                );\r\n            });\r\n\r\n            // 得到有序列表\r\n            let ret = [];\r\n            let hot = [];\r\n\r\n            for (let key in map) {\r\n                let val = map[key];\r\n\r\n                if (val.title.match(/[a-zA-Z]/)) {\r\n                    ret.push(val);\r\n                } else if (val.title === HOT_NAME) {\r\n                    hot.push(val);\r\n                }\r\n            }\r\n\r\n            ret.sort((a, b) => a.title.charCodeAt(0) - b.title.charCodeAt(0));\r\n\r\n            return hot.concat(ret);\r\n        },\r\n        ...mapMutations({\r\n            setSinger: \"SET_SINGER\"\r\n        })\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n.singer {\r\n    position: fixed;\r\n    top: 88px;\r\n    bottom: 0;\r\n    width: 100%;\r\n}\r\n\r\n.slide-enter-active, .slide-leave-active {\r\n    transition: all 0.3s;\r\n}\r\n\r\n.slide-enter, .slide-leave-to {\r\n    transform: translate3d(100%, 0, 0);\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/singer/singer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"singer\"},[_c('list-view',{ref:\"list\",attrs:{\"data\":_vm.singers},on:{\"select\":_vm.selectSinger}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slide\"}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4c063a12\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/singer/singer.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4c063a12\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./singer.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4c063a12\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./singer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4c063a12\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/singer/singer.vue\n// module id = null\n// module chunks = ","import jsonp from 'common/js/jsonp';\r\nimport { commonParams, options } from './config';\r\n\r\nexport function getSingerList() {\r\n    const url = 'https://c.y.qq.com/v8/fcg-bin/v8.fcg';\r\n\r\n    const data = Object.assign({}, commonParams, {\r\n        channel: 'singer',\r\n        page: 'list',\r\n        key: 'all_all_all',\r\n        pagesize: 100,\r\n        pagenum: 1,\r\n        hostUin: 0,\r\n        needNewCode: 0,\r\n        platform: 'yqq'\r\n    });\r\n\r\n    return jsonp(url, data, options);\r\n}\r\n\r\nexport function getSingerDetail(singerId) {\r\n    const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg';\r\n\r\n    const data = Object.assign({}, commonParams, {\r\n        hostUin: 0,\r\n        needNewCode: 0,\r\n        platform: 'yqq',\r\n        order: 'listen',\r\n        begin: 0,\r\n        num: 80,\r\n        songstatus: 1,\r\n        singermid: singerId\r\n    });\r\n\r\n    return jsonp(url, data, options);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/singer.js"],"sourceRoot":""}